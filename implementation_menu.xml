<?xml version="1.0" encoding="UTF-8"?>
<odoo>

  <record id="action_project_implementation" model="ir.actions.act_window">
    <field name="name">Implementare proiecte</field>
    <field name="res_model">project.implementation</field>
    <field name="view_mode">list,form</field>
    <field name="context">{'create': False}</field>
    <field name="domain">[('funding_project_id.status_proiect', '=', 'contractat')]</field>
  </record>

  <!-- Server action: calculează excluded_funding_ids și deschide wizard-ul -->
  <record id="action_open_create_implementation_wizard_server" model="ir.actions.server">
    <field name="name">Creează implementare (wizard)</field>
    <field name="model_id" ref="model_project_implementation"/>
    <field name="state">code</field>
    <field name="code">action = env['project.implementation'].action_open_create_implementation_wizard()</field>
  </record>

  <menuitem id="menu_project_implementation_root" name="Implementare" sequence="30"/>

  <menuitem id="menu_project_implementation"
            name="Proiecte implementare"
            parent="menu_project_implementation_root"
            action="action_project_implementation"
            sequence="10"/>

  <menuitem id="menu_project_implementation_create"
            name="Creează implementare"
            parent="menu_project_implementation_root"
            action="action_open_create_implementation_wizard_server"
            sequence="20"/>

</odoo>