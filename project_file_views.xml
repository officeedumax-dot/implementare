<?xml version="1.0" encoding="UTF-8"?>
<odoo>

  <record id="view_project_file_tree" model="ir.ui.view">
    <field name="name">project.file.tree</field>
    <field name="model">project.file</field>
    <field name="arch" type="xml">
      <list string="Fișiere" create="1" delete="1">
        <!-- A: implementarea e sursa adevărului; proiectul e doar informativ -->
        <field name="implementation_id"/>
        <field name="funding_project_id"/>

        <field name="category"/>
        <field name="res_model"/>
        <field name="res_id"/>
        <field name="original_filename"/>
        <field name="standard_filename"/>
        <field name="stored_path"/>
        <button name="action_download" type="object" string="Download" class="btn-secondary"/>
      </list>
    </field>
  </record>

  <record id="view_project_file_form" model="ir.ui.view">
    <field name="name">project.file.form</field>
    <field name="model">project.file</field>
    <field name="arch" type="xml">
      <form string="Fișier proiect">
        <sheet>
          <group>
            <!-- A: obligatoriu; când deschizi din Contract vine din context -->
            <field name="implementation_id" required="1"/>
            <!-- A: derivat automat din implementare -->
            <field name="funding_project_id" readonly="1"/>
            <field name="category"/>
          </group>

          <group>
            <field name="res_model" readonly="1"/>
            <field name="res_id" readonly="1"/>
          </group>

          <group>
            <field name="original_filename" readonly="1"/>
            <field name="standard_filename" readonly="1"/>
            <field name="stored_path" readonly="1"/>
          </group>

          <group string="Upload">
            <field name="upload_filename" invisible="1"/>
            <field name="upload" filename="upload_filename"/>
            <button name="action_download" type="object" string="Download" class="btn-secondary"/>
          </group>

          <group>
            <field name="note"/>
          </group>
        </sheet>
      </form>
    </field>
  </record>

</odoo>